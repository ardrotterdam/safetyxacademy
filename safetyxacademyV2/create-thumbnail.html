<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Create Thumbnail</title>
</head>
<body>
    <h1>Create Thumbnail</h1>
    <input type="file" id="fileInput" accept="image/webp">
    <canvas id="canvas" style="display:none;"></canvas>
    <a id="downloadLink" style="display:none;">Download Thumbnail</a>
    
    <script>
        const fileInput = document.getElementById('fileInput');
        const canvas = document.getElementById('canvas');
        const downloadLink = document.getElementById('downloadLink');
        const ctx = canvas.getContext('2d');
        const maxWidth = 300;
        
        fileInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = new Image();
                img.onload = function() {
                    // Calculate new dimensions
                    let width = img.width;
                    let height = img.height;
                    
                    if (width > maxWidth) {
                        height = (height * maxWidth) / width;
                        width = maxWidth;
                    }
                    
                    // Set canvas size
                    canvas.width = width;
                    canvas.height = height;
                    
                    // Draw image with high quality
                    ctx.imageSmoothingEnabled = true;
                    ctx.imageSmoothingQuality = 'high';
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // Convert to blob and create download link
                    canvas.toBlob(function(blob) {
                        const url = URL.createObjectURL(blob);
                        downloadLink.href = url;
                        downloadLink.download = 'veiligheidskundige-thumbnail.webp';
                        downloadLink.style.display = 'block';
                        downloadLink.textContent = 'Download Thumbnail (' + width + 'x' + height + ')';
                    }, 'image/webp', 0.90);
                };
                img.src = event.target.result;
            };
            reader.readAsDataURL(file);
        });
    </script>
</body>
</html>

